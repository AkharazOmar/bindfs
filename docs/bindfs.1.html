<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>BINDFS(1) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<p> 
<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
bindfs - mount --bind in user-space 
<p> 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>bindfs</b> [<i>options</i>]<i> dir mountpoint
</i>
<p> 
<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
A FUSE filesystem for mirroring the contents of a directory
to another directory. Additionally, one can change the permissions of files
in the mirrored directory. 
<p> 
<p> 
<h2><a name='sect3' href='#toc3'>File Ownership</a></h2>

<dl>

<dt><b>-u, --force-user, -o force-user=...</b> </dt>
<dd>Makes
all files owned by the specified user. Also causes chown on the mounted
filesystem to always fail. 
<p> </dd>

<dt><b>-g, --force-group=<i>group</i>, -o force-group=...</b> </dt>
<dd>Makes all
files owned by the specified group. Also causes chgrp on the mounted filesystem
to always fail. 
<p> </dd>

<dt><b>-p, --perms=<i>permissions</i>, -o perms=...</b> </dt>
<dd>Takes a comma- or colon-separated
list of chmod-like permission specifications to be applied to the permission
bits in order. See <b>PERMISSION SPECIFICATION</b> below for details. 
<p> This only
affects how the permission bits of existing files are altered when shown
in the mounted directory. You can use --create-with-perms to change the permissions
that newly created files get in the source directory. 
<p> Note that, as usual,
the root user isn&rsquo;t bound by the permissions set here. You can get a truly
read-only mount by using <b>-r</b>. 
<p> </dd>

<dt><b>-m, --mirror=<i>user1:user2:...</i>, -o mirror=...</b> </dt>
<dd>Takes a comma-
or colon-separated list of users who will see themselves as the owners of
all files. Users who are not listed here will still be able to access the
mount if the permissions otherwise allow them to. 
<p> You can also give a group
name prefixed with an &rsquo;@&rsquo; to mirror all members of a group. This will not
change which group the files are shown to have. 
<p> </dd>

<dt><b>-M, --mirror-only=<i>user1:user2:...</i>,
-o mirror-only=...</b> </dt>
<dd>Like <b>--mirror</b> but disallows access for all other users (except
root). 
<p> </dd>

<dt><b>--map=<i>user1/user2:@group1/@group2:...</i>, -o map=...</b> </dt>
<dd>Given a mapping <i>user1/user2</i>,
all files owned by user1 are shown as owned by user2. When user2 creates
files, they are chowned to user1 in the underlying directory. When files
are chowned to user2, they are chowned to user1 in the underlying directory.
Works similarly for groups. 
<p> A single user or group may appear no more than
once on the left and once on the right of a slash in the list of mappings.
Currently, the options <b>--force-user</b>, <b>--force-group</b>, <b>--mirror</b>, <b>--create-for-*</b>, <b>--chown-*</b>
and <b>--chgrp-*</b> override the corresponding behavior of this option. 
<p> Requires
mounting as root. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>File Creation Policy</a></h2>
New files and directories are created
so they are owned by the mounter. bindfs can let this happen (the default
for normal users), or it can try to change the owner to the uid/gid of
the process that wants to create the file (the default for root).  It is
also possible to have bindfs try to change the owner to a particular user
or group. 
<p> 
<dl>

<dt><b>--create-as-user, -o create-as-user</b> </dt>
<dd>Tries to change the owner and group
of new files and directories to the uid and gid of the caller. This can
work only if the mounter is root. It is also the default behavior (mimicing
mount --bind) if the mounter is root. 
<p> </dd>

<dt><b>--create-as-mounter, -o create-as-mounter</b>
</dt>
<dd>All new files and directories will be owned by the mounter. This is the
default behavior for non-root mounters. 
<p> </dd>

<dt><b>--create-for-user=<i>user</i>, -o create-for-user=...</b>
</dt>
<dd>Tries to change the owner of new files and directories to the user specified
here.  This can work only if the mounter is root.  This option overrides
the --create-as-user and --create-as-mounter options. 
<p> </dd>

<dt><b>--create-for-group=<i>group</i>, -o create-for-group=...</b>
</dt>
<dd>Tries to change the owning group of new files and directories to the group
specified here.  This can work only if the mounter is root.  This option
overrides the --create-as-user and --create-as-mounter options. 
<p> </dd>

<dt><b>--create-with-perms=<i>permissions</i>,
-o create-with-perms=...</b> </dt>
<dd>Works like --perms but is applied to the permission bits
of new files get in the source directory. Normally the permissions of new
files depend on the creating process&rsquo;s preferences and umask. This option
can be used to modify those permissions or override them completely. See
<b>PERMISSION SPECIFICATION</b> below for details. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect5' href='#toc5'>Chown/Chgrp Policy</a></h2>
The behaviour
on chown/chgrp calls can be changed. By default they are passed through
to the source directory even if bindfs is set to show a fake owner/group.
A chown/chgrp call will only succeed if the user has enough mirrored permissions
to chmod the mirrored file AND the mounter has enough permissions to chmod
the real file. 
<p> 
<dl>

<dt><b>--chown-normal, -o chown-normal</b> </dt>
<dd>Tries to chown the underlying
file. This is the default. 
<p> </dd>

<dt><b>--chown-ignore, -o chown-ignore</b> </dt>
<dd>Lets chown succeed
(if the user has enough mirrored permissions) but actually does nothing.
A combined chown/chgrp is effectively turned into a chgrp-only request. 
<p>
</dd>

<dt><b>--chown-deny, -o chown-deny</b> </dt>
<dd>Makes chown always fail with a &rsquo;permission denied&rsquo;
error. A combined chown/chgrp request will fail as well. 
<p> </dd>

<dt><b>--chgrp-normal, -o
chgrp-normal</b> </dt>
<dd>Tries to chgrp the underlying file. This is the default. 
<p> </dd>

<dt><b>--chgrp-ignore,
-o chgrp-ignore</b> </dt>
<dd>Lets chgrp succeed (if the user has enough mirrored permissions)
but actually does nothing. A combined chown/chgrp is effectively turned
into a chown-only request. 
<p> </dd>

<dt><b>--chgrp-deny, -o chgrp-deny</b> </dt>
<dd>Makes chgrp always fail
with a &rsquo;permission denied&rsquo; error. A combined chown/chgrp request will fail
as well. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect6' href='#toc6'>Chmod Policy</a></h2>
Chmod calls are forwarded to the source directory
by default. This may cause unexpected behaviour if bindfs is altering permission
bits. 
<p> 
<dl>

<dt><b>--chmod-normal, -o chmod-normal</b> </dt>
<dd>Tries to chmod the underlying file. This
will succeed if the user has the appropriate mirrored permissions to chmod
the mirrored file AND the mounter has enough permissions to chmod the real
file. This is the default (in order to behave like mount --bind by default).

<p> </dd>

<dt><b>--chmod-ignore, -o chmod-ignore</b> </dt>
<dd>Lets chmod succeed (if the user has enough
mirrored permissions) but actually does nothing. 
<p> </dd>

<dt><b>--chmod-deny, -o chmod-deny</b>
</dt>
<dd>Makes chmod always fail with a &rsquo;permission denied&rsquo; error. 
<p> </dd>

<dt><b>--chmod-filter=<i>permissions</i>,,
-o chmod-filter=...</b> </dt>
<dd>Changes the permission bits of a chmod request before it
is applied to the original file. Accepts the same permission syntax as --perms.
See <b>PERMISSION SPECIFICATION</b> below for details. 
<p> </dd>

<dt><b>--chmod-allow-x, -o chmod-allow-x</b>
</dt>
<dd>Allows setting and clearing the executable attribute on files (but not
directories). When used with --chmod-ignore, chmods will only affect execute
bits on files and changes to other bits are discarded. With --chmod-deny, all
chmods that would change any bits except excecute bits on files will still
fail with a &rsquo;permission denied&rsquo;. This option does nothing with --chmod-normal.

<p> 
<p> </dd>
</dl>

<h2><a name='sect7' href='#toc7'>Xattr Policy</a></h2>
Extended attributes are mirrored by default, though not all
underlying file systems support xattrs. 
<p> 
<dl>

<dt><b>--xattr-none, -o xattr-none</b> </dt>
<dd>Disable
extended attributes altogether. All operations will return &rsquo;Operation not
supported&rsquo;. 
<p> </dd>

<dt><b>--xattr-ro, -o xattr-ro</b> </dt>
<dd>Let extended attributes be read-only. 
<p> </dd>

<dt><b>--xattr-rw,
-o xattr-rw</b> </dt>
<dd>Let extended attributes be read-write (the default). The read/write
permissions are checked against the (possibly modified) file permissions
inside the mount. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect8' href='#toc8'>Miscellaneous Options</a></h2>

<p> 
<dl>

<dt><b>-h, --help</b> </dt>
<dd>Displays a help message
and exits. 
<p> </dd>

<dt><b>-V, --version</b> </dt>
<dd>Displays version information and exits. 
<p> </dd>

<dt><b>-n, --no-allow-other,
-o no-allow-other</b> </dt>
<dd>Does not add <b>-o allow_other</b> to FUSE options. This causes the
mount to be accessible only by the current user. 
<p> </dd>

<dt><b>--realistic-permissions,
-o realistic-permissions</b> </dt>
<dd>Hides read/write/execute permissions for a mirrored
file when the mounter doesn&rsquo;t have read/write/execute access to the underlying
file. Useless when mounting as root, since root will always have full access.

<p> (Prior to version 1.10 this option was the default behavior. I felt it violated
the principle of least surprise badly enough to warrant a small break in
backwards-compatibility.) 
<p> </dd>

<dt><b>--ctime-from-mtime, -o ctime-from-mtime</b> </dt>
<dd>Recall that a
unix file has three standard timestamps: <b>atime</b> (last access i.e. read time),
<b>mtime</b> (last content modification time) <b>ctime</b> (last content or metadata
(inode) change time) 
<p> With this option, the ctime of each file and directory
is read from its mtime. In other words, only content modifications (as opposed
to metadata changes) will be reflected in a mirrored file&rsquo;s ctime. The underlying
file&rsquo;s ctime will still be updated normally. 
<p> </dd>

<dt><b>--hide-hard-links, -o hide-hard-links</b>
</dt>
<dd>Shows the hard link count of all files as 1. 
<p> </dd>

<dt><b>--multithreaded, -o multithreaded</b>
</dt>
<dd>Run bindfs in multithreaded mode. While bindfs is designed to be otherwise
thread-safe, there is currently a race condition that may pose a security
risk for some use cases. See <b>BUGS</b> below. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect9' href='#toc9'>Fuse Options</a></h2>

<dl>

<dt><b>-o <i>options</b> </i></dt>
<dd>Fuse options.

<p> </dd>

<dt><b>-r, -o ro</b> </dt>
<dd>Make the mount strictly read-only. This even prevents root from
writing to it. If this is all you need, then (since Linux 2.6.26) you can
get a more efficent mount with <b>mount --bind</b> and then <b>mount -o remount,ro</b>. 
<p>
</dd>

<dt><b>-d, -o debug</b> </dt>
<dd>Enable debug output (implies -f). 
<p> </dd>

<dt><b>-f</b> </dt>
<dd>Foreground operation. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect10' href='#toc10'>Permission
Specification</a></h2>
The <b>-p</b> option takes a comma- or colon-separated list of either
octal numeric permission bits or symbolic representations of permission
bit operations. The symbolic representation is based on that of the  <i><b>chmod</b>(1)</i>
command. setuid, setgid and sticky bits are ignored. 
<p> This program extends
the chmod symbolic representation with the following operands: 
<p> &lsquo;<b>D</b>&rsquo; (right
hand side)     Works like <b>X</b> but applies only to directories (not to executables).<br>
 
<p> &lsquo;<b>d</b>&rsquo; and &lsquo;<b>f</b>&rsquo; (left hand side)     Makes this directive only apply to directories
(d) or files (f).<br>
     e.g. <b>gd-w</b> would remove the group write bit from all directories.<br>
 
<p> &lsquo;<b>u</b>&rsquo;, &lsquo;<b>g</b>&rsquo;, &lsquo;<b>o</b>&rsquo; (right hand side)     Uses the user (u), group (g) or <i>others
(o)</i> permission bits of<br>
     the original file.<br>
     e.g. <b>g=u</b> would copy the user&rsquo;s permission bits to the group.<br>
          <b>ug+o</b> would add the others&rsquo; permissions to the owner and group.<br>
 
<p> 
<p> <i>Examples</i> 
<dl>

<dt><b>o-rwx</b> </dt>
<dd>Removes all permission bits from others. 
<p> </dd>

<dt><b>g=rD</b> </dt>
<dd>Allows group
to read all files and enter all directories, but nothing else. 
<p> </dd>

<dt><b>0644,a+X</b>
</dt>
<dd>Sets permission bits to 0644 and adds the execute bit for everyone to all
directories and executables. 
<p> </dd>

<dt><b>og-x:og+rD:u=rwX:g+rw</b> </dt>
<dd>Removes execute bit for
others and group, adds read and directory execute for others and group,
sets user permissions to read, write and execute directory/executable,
adds read and write for group. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect11' href='#toc11'>Examples</a></h2>
 
<dl>

<dt><b>bindfs -u www -g nogroup -p 0000,u=rD
~/mywebsite ~/public_html/mysite</b> </dt>
<dd>
<p> Publishes a website in public_html so
that only the &rsquo;www&rsquo; user can read the site. 
<p> </dd>

<dt><b>bindfs -M foo,bar,1007,@mygroup
-p 0600,u+X dir mnt</b> </dt>
<dd>
<p> Gives access to &rsquo;foo&rsquo;, &rsquo;bar&rsquo;, the user with the UID 1007
as well as everyone in the group &rsquo;mygroup&rsquo;. Sets the permission bits to 0600,
thus giving the specified users read/write access, and adds the user execute
bit for directories and executables. 
<p> </dd>

<dt><b>bindfs -ono-allow-other,perms=a-w somedir
somedir</b> </dt>
<dd>
<p> Makes a directory read-only and accessable only by the current
user. 
<p> </dd>

<dt><b>/home/bob/shared /var/www/shared/bob  fuse.bindfs  perms=0000:u+rD
  0   0</b> </dt>
<dd>
<p> An example <i>/etc/fstab</i> entry. Note that the colon must be used to
separate arguments to perms, because the comma is an option separator in
<i>/etc/fstab</i>. 
<p> </dd>

<dt><b>bindfs#/home/bob/shared /var/www/shared/bob  fuse perms=0000:u+rD
  0   0</b> </dt>
<dd>
<p> Older systems may require this deprecated fstab syntax. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect12' href='#toc12'>Notes</a></h2>

<p>
Setuid and setgid bits have no effect inside the mount. This is a necessary
security feature of FUSE. 
<p> MacFuse caches file contents by default. This
means that changes in source files are not always immediately visible under
the mount point. <b>-o nolocalcaches</b> can be used to disable the cache. 
<p> When
using <b>--mirror[-only] @somegroup</b>, bindfs won&rsquo;t see changes to the group&rsquo;s member
list. Sending bindfs a <b>SIGUSR1</b> signal will make it reread the user database.

<p> 
<p> 
<h2><a name='sect13' href='#toc13'>Bugs</a></h2>

<p> If bindfs is run in multithreaded mode (with the <b>--multithreaded</b> option)
then it&rsquo;s possible for another process to briefly see a file with an incorrect
owner, group or permissions. This may constitute a security risk if you
rely on bindfs to reduce permissions on new files. For this reason, as of
version 1.11 bindfs runs in single-threaded mode by default. 
<p> Please report
bugs and/or send pull requests to <i><b>https://github.com/mpartel/bindfs/issues</b>.</i>

<p> 
<p> 
<h2><a name='sect14' href='#toc14'>Deprecations</a></h2>

<p> The option names <b>--user</b> and <b>--group</b> were deprecated and replaced
with <b>--force-user</b> and <b>--force-group</b> in version 1.12. The former names clashed with
standard option names. They are still available but their use is discouraged
and prints a warning. The synonym <b>--owner</b> is also deprecated for consistency.

<p> 
<p> 
<h2><a name='sect15' href='#toc15'>Author</a></h2>
Martin P[:a]rtel &lt;martin dot partel at gmail dot com&gt; 
<p> 
<p> 
<h2><a name='sect16' href='#toc16'>See Also</a></h2>
<i><b>chmod</b>(1)</i>,
<i><b>fusermount</b>(1)</i>, <i><b>http://bindfs.org/</b></i> 
<p> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>File Ownership</a></li>
<li><a name='toc4' href='#sect4'>File Creation Policy</a></li>
<li><a name='toc5' href='#sect5'>Chown/Chgrp Policy</a></li>
<li><a name='toc6' href='#sect6'>Chmod Policy</a></li>
<li><a name='toc7' href='#sect7'>Xattr Policy</a></li>
<li><a name='toc8' href='#sect8'>Miscellaneous Options</a></li>
<li><a name='toc9' href='#sect9'>Fuse Options</a></li>
<li><a name='toc10' href='#sect10'>Permission Specification</a></li>
<li><a name='toc11' href='#sect11'>Examples</a></li>
<li><a name='toc12' href='#sect12'>Notes</a></li>
<li><a name='toc13' href='#sect13'>Bugs</a></li>
<li><a name='toc14' href='#sect14'>Deprecations</a></li>
<li><a name='toc15' href='#sect15'>Author</a></li>
<li><a name='toc16' href='#sect16'>See Also</a></li>
</ul>
</body>
</html>
